{"version":3,"sources":["components/ui/Wysiwyg.jsx"],"names":["rawContentState","Wysiwyg","state","editorContent","undefined","contentState","editorState","onEditorChange","setState","clearContent","onContentStateChange","console","log","onEditorStateChange","imageUploadCallBack","file","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","data","FormData","append","send","addEventListener","response","JSON","parse","responseText","error","this","className","first","second","gutter","md","title","bordered","toolbarClassName","wrapperClassName","editorClassName","toolbar","history","inDropdown","inline","list","textAlign","image","uploadCallback","placeholder","spellCheck","onFocus","onBlur","onTab","localization","locale","translations","mention","separator","trigger","caseSensitive","suggestions","text","value","url","draftToHtml","style","whiteSpace","draftToMarkdown","stringify","Component"],"mappings":"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","file":"static/js/4.416a5ec3.chunk.js","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/26.\n */\nimport React, { Component } from 'react';\nimport { Row, Col, Card } from 'antd';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport { Editor } from 'react-draft-wysiwyg';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport draftToHtml from 'draftjs-to-html';\nimport draftToMarkdown from 'draftjs-to-markdown';\n\nconst rawContentState = {'entityMap': {'0': {'type': 'IMAGE', 'mutability': 'MUTABLE', 'data': {'src': 'http://i.imgur.com/aMtBIep.png', 'height': 'auto', 'width': '100%'}}}, 'blocks': [{'key': '9unl6', 'text': '', 'type': 'unstyled', 'depth': 0, 'inlineStyleRanges': [], 'entityRanges': [], 'data': {}}, {'key': '95kn', 'text': ' ', 'type': 'atomic', 'depth': 0, 'inlineStyleRanges': [], 'entityRanges': [{'offset': 0, 'length': 1, 'key': 0}], 'data': {}}, {'key': '7rjes', 'text': '', 'type': 'unstyled', 'depth': 0, 'inlineStyleRanges': [], 'entityRanges': [], 'data': {}}]};\n\nclass Wysiwyg extends Component {\n  state = {\n    editorContent: undefined,\n    contentState: rawContentState,\n    editorState: '',\n  };\n\n  onEditorChange = (editorContent) => {\n    this.setState({\n      editorContent,\n    });\n  };\n\n  clearContent = () => {\n    this.setState({\n      contentState: '',\n    });\n  };\n\n  onContentStateChange = (contentState) => {\n    console.log('contentState', contentState);\n  };\n\n  onEditorStateChange = (editorState) => {\n    this.setState({\n      editorState,\n    });\n  };\n\n  imageUploadCallBack = (file) => new Promise(\n    (resolve, reject) => {\n      const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\n      xhr.open('POST', 'https://api.imgur.com/3/image');\n      xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\n      const data = new FormData(); // eslint-disable-line no-undef\n      data.append('image', file);\n      xhr.send(data);\n      xhr.addEventListener('load', () => {\n        const response = JSON.parse(xhr.responseText);\n        resolve(response);\n      });\n      xhr.addEventListener('error', () => {\n        const error = JSON.parse(xhr.responseText);\n        reject(error);\n      });\n    }\n  );\n\n  render () {\n    const { editorContent, editorState } = this.state;\n    return (\n      <div className=\"gutter-example button-demo\">\n        <BreadcrumbCustom first=\"UI\" second=\"富文本\" />\n        <Row gutter={16}>\n          <Col className=\"gutter-row\" md={24}>\n            <div className=\"gutter-box\">\n              <Card title=\"富文本编辑器\" bordered={false} >\n                <Editor\n                  editorState={editorState}\n                  toolbarClassName=\"home-toolbar\"\n                  wrapperClassName=\"home-wrapper\"\n                  editorClassName=\"home-editor\"\n                  onEditorStateChange={this.onEditorStateChange}\n                  toolbar={{\n                    history: { inDropdown: true },\n                    inline: { inDropdown: false },\n                    list: { inDropdown: true },\n                    textAlign: { inDropdown: true },\n                    image: { uploadCallback: this.imageUploadCallBack },\n                  }}\n                  onContentStateChange={this.onEditorChange}\n                  placeholder=\"请输入正文~~尝试@哦，有惊喜\"\n                  spellCheck\n                  onFocus={() => {console.log('focus')}}\n                  onBlur={() => {console.log('blur')}}\n                  onTab={() => {console.log('tab'); return true;}}\n                  localization={{ locale: 'zh', translations: {'generic.add': 'Test-Add'} }}\n                  mention={{\n                    separator: ' ',\n                    trigger: '@',\n                    caseSensitive: true,\n                    suggestions: [\n                      { text: 'A', value: 'AB', url: 'href-a' },\n                      { text: 'AB', value: 'ABC', url: 'href-ab' },\n                      { text: 'ABC', value: 'ABCD', url: 'href-abc' },\n                      { text: 'ABCD', value: 'ABCDDDD', url: 'href-abcd' },\n                      { text: 'ABCDE', value: 'ABCDE', url: 'href-abcde' },\n                      { text: 'ABCDEF', value: 'ABCDEF', url: 'href-abcdef' },\n                      { text: 'ABCDEFG', value: 'ABCDEFG', url: 'href-abcdefg' },\n                    ],\n                  }}\n                />\n\n                <style>{`\n                                    .home-editor {\n                                        min-height: 300px;\n                                    }\n                                `}</style>\n              </Card>\n            </div>\n          </Col>\n          <Col className=\"gutter-row\" md={8}>\n            <Card title=\"同步转换HTML\" bordered={false}>\n              <pre>{draftToHtml(editorContent)}</pre>\n            </Card>\n          </Col>\n          <Col className=\"gutter-row\" md={8}>\n            <Card title=\"同步转换MarkDown\" bordered={false}>\n              <pre style={{whiteSpace: 'pre-wrap'}}>{draftToMarkdown(editorContent)}</pre>\n            </Card>\n          </Col>\n          <Col className=\"gutter-row\" md={8}>\n            <Card title=\"同步转换JSON\" bordered={false}>\n              <pre style={{whiteSpace: 'normal'}}>{JSON.stringify(editorContent)}</pre>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Wysiwyg;\n"],"sourceRoot":""}